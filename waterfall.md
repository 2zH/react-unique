# 瀑布流布局研究
## 瀑布流的几个要点

1. 容器宽度
2. 每个元素高度
3. 单元素宽度

## 思路
- 每行放置多少个容器 = 容器宽度/单元素宽度

## 难点
元素高度按常理来说应该要按照元素初始高度来设定，而并非通过width强制指定。在React中，不通过复杂计算的话，React Component必须被渲染后才能够取到dom的默认高度，但在瀑布流布局，获取元素高度的必须的，因为后排的元素是通过前排的元素的高度进行填充。
思路 1：
- 利用浏览器进行高度计算。在一个隐藏区域先把所有React Component进行渲染，渲染完毕后获取dom元素高度，更新到state store，然后触发瀑布流布局。
思路 2:
- 手动进行高度计算(通过React Component中的字体大小、指定宽度、字数和默认边距)，把计算完的结果导入state store中，然后触发瀑布流布局。

在思路 1中，会浪费一次渲染React组件的时间，瀑布流布局会在计算完高度后的二次渲染中开始布局。而后每一次热更新React组件，都会先在隐藏区域利用浏览器进行高度计算，计算完毕后更新到store触发瀑布流布局的刷新。隐藏区域的创建思路是：利用"position: absolution"、"z-index: -1"和"visibility: hidden"创建一个隐藏式组件，由于隐藏方式是visibility的，所以其中的高度跟宽度均可通过dom操作取得。

思路 2由于React Component中可能并不是只有文字，也会有图片，或其他什么的，还需要进行其他元素排查，很难进行手动计算，遂放弃。

## 遗留问题
涉及React Component中的每一次宽度高度变化，container的每一次宽度变化，都需要进行瀑布流的刷新渲染。